<head>
  {{- partial "meta/main.html" . }}
  {{- hugo.Generator }}

  {{/* Open Graph tags */}}
  {{ template "_internal/opengraph.html" . }}

  {{/* Twitter Card tags */}}
  {{ template "_internal/twitter_cards.html" . }}

  {{/* Canonical link, RSS */}}
  <link rel="canonical" href="{{ .Permalink }}">
  {{- with .OutputFormats.Get "RSS" }}
    <link href="{{ .RelPermalink }}" rel="alternate" type="application/rss+xml" title="{{ $.Site.Title }}">
    <link href="{{ .RelPermalink }}" rel="feed" type="application/rss+xml" title="{{ $.Site.Title }}">
  {{- end }}

  {{- /* Styles */ -}}
  {{- $style := resources.Get "sass/main.scss" 
       | resources.ExecuteAsTemplate "style.scss" . 
       | toCSS (dict "targetPath" "style.css") 
       | minify 
       | fingerprint }}
  <link href="{{ $style.RelPermalink }}" rel="stylesheet">
  {{- $code_syntax_highlight_css := resources.Get "code-highlight.css" | minify | fingerprint }}
  <link href="{{ $code_syntax_highlight_css.RelPermalink }}" rel="stylesheet">

  {{/* Custom Favicon — 指向你放在 static/avater.jpg 的头像 */}}
  <link rel="icon" href="{{ "/avater_circle.png" | relURL }}" type="image/jpeg">

  {{- partial "webmanifest.html" . -}}
  {{- partial "browserconfig.html" . -}}

  <meta name="theme-color" content="{{ .Site.Params.webmanifest.theme_color | default "#434648" }}">

  {{/* SVG favicon for the modern web (也可以去掉) */}}
  {{/* <link rel="icon" type="image/svg+xml" href="{{ (resources.Get "icons/favicon.svg").RelPermalink }}"> */}}

  {{/* KaTeX support */}}
  {{- if or .Params.math .Site.Params.math }}
    {{ partial "helpers/katex.html" . }}
  {{- end }}

  {{/* Google Analytics (production only) */}}
  {{- if hugo.IsProduction | or (eq site.Params.env "production") }}
    {{ template "_internal/google_analytics.html" . }}
  {{- end }}

  {{/* Extend head with user supplied partial */}}
  {{ if templates.Exists "partials/custom-head.html" }}
    {{ partial "custom-head.html" . }}
  {{ end }}
</head>
